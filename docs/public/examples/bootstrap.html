<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
      VanillaJS Smart Wizard Demo - The awesome VanillaJS step wizard plugin
    </title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootrap for the demo page -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <!-- Animate CSS for the css animation support if needed -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <!-- Include SmartWizard CSS -->
    <link href="./css/demo.css" rel="stylesheet" type="text/css" />
    <link
      href="./dist/css/vanillajs.smartWizard.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <br />
    <div class="container">
      <div class="fixed-plugin">
        <button
          class="btn"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasScrolling"
          aria-controls="offcanvasScrolling"
        >
          <i class="bi-gear-fill"></i>
        </button>
      </div>

      <div class="mb-5 border-bottom" id="sidebar">
        <a
          href="./index.html"
          class="btn btn-outline-primary btn-sm float-end mt-2"
          >Back</a
        >
        <button
          class="btn btn-outline-primary btn-sm float-end mt-2"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasScrolling"
          aria-controls="offcanvasScrolling"
        >
          Settings
        </button>

        <div class="float-end text-muted me-3 mt-2">
          Step number: <span id="sw-current-step"></span> of
          <span id="sw-total-step"></span>
        </div>

        <h1>VanillaJS Smart Wizard Demo</h1>
        <div class="mb-2 text-muted">
          Click on the settings buttons for trying out different options
        </div>
        <button
          type="button"
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#wizardModal"
        >
          Open Modal
        </button>
      </div>

      <div
        class="modal fade"
        id="wizardModal"
        tabindex="-1"
        aria-labelledby="wizardModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header"></div>
            <div class="modal-body">
              <!-- SmartWizard html -->
              <div id="smartwizard" class="sw">
                <ul class="nav nav-progress">
                  <li class="nav-item">
                    <a class="nav-link" href="#step-1">
                      <div class="num">1</div>
                      Customer Details
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#step-2">
                      <span class="num">2</span>
                      Products Details
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#step-3">
                      <span class="num">3</span>
                      Shipping Details
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#step-4">
                      <span class="num">4</span>
                      Confirm Order
                    </a>
                  </li>
                </ul>

                <div class="sw-content">
                  <div
                    id="step-1"
                    class="sw-panel"
                    role="tabpanel"
                    aria-labelledby="step-1"
                  >
                    <h3>Step 1 Content</h3>
                    Lorem Ipsum is simply dummy text of the printing and
                    typesetting industry. Lorem Ipsum has been the industry's
                    standard dummy text ever since the 1500s, when an unknown
                    printer took a galley of type and scrambled it to make a
                    type specimen book. It has survived not only five centuries,
                    but also the leap into electronic typesetting, remaining
                    essentially unchanged. It was popularised in the 1960s with
                    the release of Letraset sheets containing Lorem Ipsum
                    passages, and more recently with desktop publishing software
                    like Aldus PageMaker including versions of Lorem Ipsum.
                  </div>
                  <div
                    id="step-2"
                    class="sw-panel"
                    role="tabpanel"
                    aria-labelledby="step-2"
                  >
                    <h3>Step 2 Content</h3>
                    <div>
                      Lorem Ipsum has been the industry's standard dummy text
                      ever since the 1500s, when an unknown printer took a
                      galley of type and scrambled it to make a type specimen
                      book. It has survived not only five centuries, but also
                      the leap into electronic typesetting, remaining
                      essentially unchanged. It was popularised in the 1960s
                      with the release of Letraset sheets containing Lorem Ipsum
                      passages, and more recently with desktop publishing
                      software like Aldus PageMaker including versions of Lorem
                      Ipsum.
                    </div>
                  </div>
                  <div
                    id="step-3"
                    class="sw-panel"
                    role="tabpanel"
                    aria-labelledby="step-3"
                  >
                    Lorem Ipsum is simply dummy text of the printing and
                    typesetting industry. Lorem Ipsum has been the industry's
                    standard dummy text ever since the 1500s, when an unknown
                    printer took a galley of type and scrambled it to make a
                    type specimen book. It has survived not only five centuries,
                    but also the leap into electronic typesetting, remaining
                    essentially unchanged. It was popularised in the 1960s with
                    the release of Letraset sheets containing Lorem Ipsum
                    passages, and more recently with desktop publishing software
                    like Aldus PageMaker including versions of Lorem Ipsum.
                  </div>
                  <div
                    id="step-4"
                    class="sw-panel"
                    role="tabpanel"
                    aria-labelledby="step-4"
                  >
                    <h3>Step 4 Content</h3>
                    Lorem Ipsum is simply dummy text of the printing and
                    typesetting industry. Lorem Ipsum has been the industry's
                    standard dummy text ever since the 1500s, when an unknown
                    printer took a galley of type and scrambled it to make a
                    type specimen book. It has survived not only five centuries,
                    but also the leap into electronic typesetting, remaining
                    essentially unchanged. It was popularised in the 1960s with
                    the release of Letraset sheets containing Lorem Ipsum
                    passages, and more recently with desktop publishing software
                    like Aldus PageMaker including versions of Lorem Ipsum.
                    Lorem Ipsum is simply dummy text of the printing and
                    typesetting industry. Lorem Ipsum has been the industry's
                    standard dummy text ever since the 1500s, when an unknown
                    printer took a galley of type and scrambled it to make a
                    type specimen book. It has survived not only five centuries,
                    but also the leap into electronic typesetting, remaining
                    essentially unchanged. It was popularised in the 1960s with
                    the release of Letraset sheets containing Lorem Ipsum
                    passages, and more recently with desktop publishing software
                    like Aldus PageMaker including versions of Lorem Ipsum.
                  </div>
                </div>

                <div class="progress">
                  <div
                    class="progress-bar"
                    role="progressbar"
                    style="width: 25%"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div
                class="d-flex align-items-center justify-content-center justify-content-md-end gap-2"
              >
                <button
                  type="button"
                  class="btn btn-secondary rounded-lg"
                  data-bs-dismiss="modal"
                >
                  <i class="fa fa-times-circle"></i>Close</button
                ><button
                  class="btn btn-secondary text-white waves-effect waves-themed prev-btn-modal"
                >
                  <i class="fa fa-backward"></i>
                  Previous</button
                ><button
                  class="btn btn-secondary text-white waves-effect waves-themed next-btn-modal"
                >
                  <i class="fa fa-forward"></i>
                  Next</button
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootrap for the demo page -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <script type="text/javascript" src="./js/demo.js"></script>

    <script type="module">
      import SmartWizard from "./dist/js/vanillajs.smartWizard.es.min.js";

      // Función para el evento de finalización
      function onFinish() {
        // Alerta reemplazada por un console.log para evitar el uso de alert() en la vista previa
        console.log("Finalizar clicado");
      }

      // Función para el evento de cancelación
      function onCancel() {
        // Element in DOM
        const sw = document.querySelector("#smartwizard");

        sw.smartWizard.reset();
      }

      // Escucha el evento 'DOMContentLoaded' para asegurar que el DOM esté listo
      document.addEventListener("DOMContentLoaded", function () {
        // Referencias a los botones y selectores
        const stateSelector = document.querySelector("#state_selector");
        const styleSelector = document.querySelector("#style_selector");
        const stepToStyle = document.querySelector("#step_to_style");
        const isReset = document.querySelector("#is_reset");

        // Element in DOM
        const sw = document.querySelector("#smartwizard");

        // Inicialización de Smart Wizard
        const smartWizard = new SmartWizard(sw, {
          selected: 0,
          theme: "arrows", // basic, arrows, square, round, dots
          transition: {
            animation: "none",
          },
          toolbar: {
            position: "none",
          },
          anchor: {
            enableNavigation: true,
            enableNavigationAlways: false,
            enableDoneState: true,
            markPreviousStepsAsDone: true,
            unDoneOnBackNavigation: false,
            enableDoneStateNavigation: true,
          },
        });

        // Associate smartWizard object with the element
        sw.smartWizard = smartWizard;

        // Evento showStep de Smart Wizard
        smartWizard.element.addEventListener("showStep", (e) => {
          const detail = e.detail;
          const stepPosition = detail.stepPosition;

          const prevBtn = document.querySelector("#prev-btn");
          const nextBtn = document.querySelector("#next-btn");

          // Lógica de los botones de navegación
          if (prevBtn) {
            prevBtn.classList.remove("disabled");
            prevBtn.disabled = false;
          }
          if (nextBtn) {
            nextBtn.classList.remove("disabled");
            nextBtn.disabled = false;
          }

          if (stepPosition === "first") {
            if (prevBtn) {
              prevBtn.classList.add("disabled");
              prevBtn.disabled = true;
            }
          } else if (stepPosition === "last") {
            if (nextBtn) {
              nextBtn.classList.add("disabled");
              nextBtn.disabled = true;
            }
          }

          // Obtener la información del paso actual y actualizar la visualización
          const stepInfo = smartWizard.getStepInfo();
          const currentStepEl = document.querySelector("#sw-current-step");
          const totalStepsEl = document.querySelector("#sw-total-step");
          if (currentStepEl && totalStepsEl) {
            currentStepEl.textContent = stepInfo.currentStep + 1;
            totalStepsEl.textContent = stepInfo.totalSteps;
          }
        });

        // Eventos de Smart Wizard para "initialized" y "loaded"
        smartWizard.element.addEventListener("initialized", function (e) {
          console.log("initialized");
        });

        smartWizard.element.addEventListener("loaded", function (e) {
          console.log("loaded");
          document.querySelectorAll(".prev-btn-modal").forEach(function(el){
              el.addEventListener("click", function() {
                  // Navigate previous
                  e.detail.wizard.prev();
                  return true;
              });
          })

          document.querySelectorAll(".next-btn-modal").forEach(function(el){
              el.addEventListener("click", function() {
                  // Navigate next
                  e.detail.wizard.next();
                  return true;
              });
          })          
        });

        // Evento para el selector de estado
        if (stateSelector) {
          stateSelector.addEventListener("change", function () {
            smartWizard.setState(
              [stepToStyle.value],
              this.value,
              !isReset.checked
            );
          });
        }

        // Evento para el selector de estilo
        if (styleSelector) {
          styleSelector.addEventListener("change", function () {
            smartWizard.setStyle(
              [stepToStyle.value],
              this.value,
              !isReset.checked
            );
          });
        }
      });
    </script>
  </body>
</html>
