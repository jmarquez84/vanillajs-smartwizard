"use strict";var b=Object.defineProperty;var _=(h,a,c)=>a in h?b(h,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):h[a]=c;var g=(h,a,c)=>_(h,typeof a!="symbol"?a+"":a,c);(function(){const a=class a{constructor(t,s){const e={selected:0,theme:"basic",justified:!0,autoAdjustHeight:!0,backButtonSupport:!0,enableUrlHash:!0,transition:{animation:"none",speed:400,easing:"",prefixCss:"",fwdShowCss:"",fwdHideCss:"",bckShowCss:"",bckHideCss:""},toolbar:{position:"bottom",showNextButton:!0,showPreviousButton:!0,extraHtml:""},anchor:{enableNavigation:!0,enableNavigationAlways:!1,enableDoneState:!0,markPreviousStepsAsDone:!0,unDoneOnBackNavigation:!1,enableDoneStateNavigation:!0},keyboard:{keyNavigation:!0,keyLeft:[37],keyRight:[39]},lang:{next:"Next",previous:"Previous"},style:{mainCss:"sw",navCss:"nav",navLinkCss:"nav-link",contentCss:"tab-content",contentPanelCss:"tab-pane",themePrefixCss:"sw-theme-",anchorDefaultCss:"default",anchorDoneCss:"done",anchorActiveCss:"active",anchorDisabledCss:"disabled",anchorHiddenCss:"hidden",anchorErrorCss:"error",anchorWarningCss:"warning",justifiedCss:"sw-justified",btnCss:"sw-btn",btnNextCss:"sw-btn-next",btnPrevCss:"sw-btn-prev",loaderCss:"sw-loading",progressCss:"progress",progressBarCss:"progress-bar",toolbarCss:"toolbar",toolbarPrefixCss:"toolbar-"},disabledSteps:[],errorSteps:[],warningSteps:[],hiddenSteps:[],getContent:null};this.options={...e,...s},this.element=typeof t=="string"?document.querySelector(t):t,this.nav=this._getFirstDescendant(`.${this.options.style.navCss}`),this.container=this._getFirstDescendant(`.${this.options.style.contentCss}`),this.steps=Array.from(this.nav.querySelectorAll(`.${this.options.style.navLinkCss}`)),this.pages=Array.from(this.container.querySelectorAll(`.${this.options.style.contentPanelCss}`)),this.progressbar=this.element.querySelector(`.${this.options.style.progressCss}`),this.dir=this._getDir(),this.current_index=-1,this.is_init=!1,this._init(),setTimeout(()=>{this._load()},0)}_init(){if(this._setElements(),this._setToolbar(),this.is_init)return!0;this._setEvents(),this.is_init=!0,this._triggerEvent("initialized")}_load(){this.pages.forEach(e=>e.style.display="none"),this.steps.forEach(e=>e.classList.remove(this.options.style.anchorDoneCss,this.options.style.anchorActiveCss)),this.current_index=-1;let t=this._getURLHashIndex();t=t!==!1?t:this.options.selected;const s=this._getShowable(t-1,"forward");t=s===null&&t>0?this._getShowable(-1,"forward"):s,t>0&&this.options.anchor.enableDoneState&&this.options.anchor.markPreviousStepsAsDone&&this.steps.slice(0,t).forEach(e=>e.classList.add(this.options.style.anchorDoneCss)),this._showStep(t),this._triggerEvent("loaded")}_getFirstDescendant(t){let s=this.element.querySelector(t);return s||(this._showError(`Elemento no encontrado: ${t}`),null)}_getDir(){let t=this.element.getAttribute("dir");return t||(t=document.documentElement.getAttribute("dir")||"ltr",this.element.setAttribute("dir",t)),t}_setElements(){this.element.className="",this.element.classList.add(this.options.style.mainCss,this.options.style.themePrefixCss+this.options.theme),this.element.classList.toggle(this.options.style.justifiedCss,this.options.justified),(this.options.anchor.enableNavigationAlways!==!0||this.options.anchor.enableNavigation!==!0)&&this.steps.forEach(t=>t.classList.add(this.options.style.anchorDefaultCss)),this.options.disabledSteps.forEach(t=>this.steps[t].classList.add(this.options.style.anchorDisabledCss)),this.options.errorSteps.forEach(t=>this.steps[t].classList.add(this.options.style.anchorErrorCss)),this.options.warningSteps.forEach(t=>this.steps[t].classList.add(this.options.style.anchorWarningCss)),this.options.hiddenSteps.forEach(t=>this.steps[t].classList.add(this.options.style.anchorHiddenCss))}_setEvents(){this.steps.forEach((t,s)=>{t.addEventListener("click",e=>{e.preventDefault(),this.options.anchor.enableNavigation===!0&&this._isShowable(t)&&this._showStep(s)})}),this.element.addEventListener("click",t=>{t.target.classList.contains(this.options.style.btnNextCss)?(t.preventDefault(),this._navigate("next")):t.target.classList.contains(this.options.style.btnPrevCss)&&(t.preventDefault(),this._navigate("prev"))}),document.addEventListener("keyup",t=>{this._keyNav(t)}),window.addEventListener("hashchange",t=>{if(this.options.backButtonSupport!==!0)return;const s=this._getURLHashIndex();s!==!1&&this._isShowable(this.steps[s])&&(t.preventDefault(),this._showStep(s))}),window.addEventListener("resize",()=>{this._fixHeight(this.current_index)})}_setToolbar(){this.element.querySelectorAll(".sw-toolbar-elm").forEach(s=>s.remove());const t=this.options.toolbar.position;t!=="none"&&(t==="both"?(this.container.before(this._createToolbar("top")),this.container.after(this._createToolbar("bottom"))):t==="top"?this.container.before(this._createToolbar("top")):this.container.after(this._createToolbar("bottom")))}_createToolbar(t){const s=document.createElement("div");s.classList.add("sw-toolbar-elm",this.options.style.toolbarCss,this.options.style.toolbarPrefixCss+t),s.setAttribute("role","toolbar");const e=this.options.toolbar.showNextButton!==!1?Object.assign(document.createElement("button"),{textContent:this.options.lang.next,className:`btn ${this.options.style.btnNextCss} ${this.options.style.btnCss}`,type:"button"}):null,i=this.options.toolbar.showPreviousButton!==!1?Object.assign(document.createElement("button"),{textContent:this.options.lang.previous,className:`btn ${this.options.style.btnPrevCss} ${this.options.style.btnCss}`,type:"button"}):null;return i&&s.appendChild(i),e&&s.appendChild(e),this.options.toolbar.extraHtml&&(s.innerHTML+=this.options.toolbar.extraHtml),s}_navigate(t){this._showStep(this._getShowable(this.current_index,t))}_showStep(t){if(t===-1||t===null||t===this.current_index||!this.steps[t]||!this._isEnabled(this.steps[t]))return!1;const s=this._getStepDirection(t);if(this.current_index!==-1){const e=new CustomEvent("leaveStep",{detail:[this._getStepAnchor(this.current_index),this.current_index,t,s],cancelable:!0});if(this.element.dispatchEvent(e),e.defaultPrevented)return!1}this._loadContent(t,()=>{const e=this._getStepAnchor(t);this._setURLHash(e.getAttribute("href")),this._setAnchor(t);const i=this._getStepPage(this.current_index),n=this._getStepPage(t);this._transit(n,i,s,()=>{this._fixHeight(t),this._triggerEvent("showStep",[e,t,s,this._getStepPosition(t)])}),this.current_index=t,this._setButtons(t),this._setProgressbar(t)})}_getShowable(t,s){let e=null,i;s==="prev"?i=this.steps.slice(0,t).reverse():i=this.steps.slice(t+1);for(let n=0;n<i.length;n++){const o=i[n];if(this._isEnabled(o)){e=s==="prev"?t-(n+1):n+t+1;break}}return e}_isShowable(t){if(!this._isEnabled(t))return!1;const s=t.classList.contains(this.options.style.anchorDoneCss);return!(this.options.anchor.enableDoneStateNavigation===!1&&s||this.options.anchor.enableNavigationAlways===!1&&!s)}_isEnabled(t){return!t.classList.contains(this.options.style.anchorDisabledCss)&&!t.classList.contains(this.options.style.anchorHiddenCss)}_getStepDirection(t){return this.current_index<t?"forward":"backward"}_getStepPosition(t){return t===0?"first":t===this.steps.length-1?"last":"middle"}_getStepAnchor(t){return t===null||t===-1?null:this.steps[t]}_getStepPage(t){return t===null||t===-1?null:this.pages[t]}_loadContent(t,s){if(typeof this.options.getContent!="function"){s();return}const e=this._getStepPage(t);if(!e){s();return}const i=this._getStepDirection(t),n=this._getStepPosition(t),o=this._getStepAnchor(t);this.options.getContent(t,i,n,o,r=>{r&&(e.innerHTML=r),s()})}_transit(t,s,e,i){const n=a.transitions[this.options.transition.animation];this._stopAnimations(),typeof n=="function"?n(t,s,e,this,o=>{o===!1&&(s&&(s.style.display="none"),t.style.display=""),i()}):(s&&(s.style.display="none"),t.style.display="",i())}_stopAnimations(){}_fixHeight(t){if(this.options.autoAdjustHeight===!1)return;const s=this._getStepPage(t).offsetHeight;s>0?this.container.style.height=`${s}px`:this.container.style.height="auto"}_setAnchor(t){if(this.current_index!==null&&this.current_index>=0){const s=this.steps[this.current_index];s.classList.remove(this.options.style.anchorActiveCss),this.options.anchor.enableDoneState!==!1&&(s.classList.add(this.options.style.anchorDoneCss),this.options.anchor.unDoneOnBackNavigation!==!1&&this._getStepDirection(t)==="backward"&&s.classList.remove(this.options.style.anchorDoneCss))}this.steps[t].classList.remove(this.options.style.anchorDoneCss),this.steps[t].classList.add(this.options.style.anchorActiveCss)}_setButtons(t){const s=this.element.querySelector(`.${this.options.style.btnNextCss}`),e=this.element.querySelector(`.${this.options.style.btnPrevCss}`);s.classList.remove(this.options.style.anchorDisabledCss),e.classList.remove(this.options.style.anchorDisabledCss);const i=this._getStepPosition(t);if(i==="first"||i==="last"){const n=i==="first"?e:s;n&&n.classList.add(this.options.style.anchorDisabledCss)}else this._getShowable(t,"next")===null&&s&&s.classList.add(this.options.style.anchorDisabledCss),this._getShowable(t,"prev")===null&&e&&e.classList.add(this.options.style.anchorDisabledCss)}_setProgressbar(t){const s=this.nav.offsetWidth,e=s/this.steps.length*(t+1)/s*100;document.documentElement.style.setProperty("--sw-progress-width",`${e}%`),this.progressbar&&(this.progressbar.querySelector(`.${this.options.style.progressBarCss}`).style.width=`${e}%`)}_keyNav(t){this.options.keyboard.keyNavigation&&(this.options.keyboard.keyLeft.includes(t.which)?(this._navigate("prev"),t.preventDefault()):this.options.keyboard.keyRight.includes(t.which)&&(this._navigate("next"),t.preventDefault()))}_triggerEvent(t,s){const e=new CustomEvent(t,{detail:s,bubbles:!0,cancelable:!0});return this.element.dispatchEvent(e),!e.defaultPrevented}_setURLHash(t){this.options.enableUrlHash&&window.location.hash!==t&&history.pushState(null,null,t)}_getURLHashIndex(){if(this.options.enableUrlHash&&window.location.hash.length>0){const t=this.nav.querySelector(`a[href*='${window.location.hash}']`);if(t)return this.steps.indexOf(t)}return!1}_showError(t){console.error(t)}_changeState(t,s,e){const n={default:this.options.style.anchorDefaultCss,active:this.options.style.anchorActiveCss,done:this.options.style.anchorDoneCss,disable:this.options.style.anchorDisabledCss,hidden:this.options.style.anchorHiddenCss,error:this.options.style.anchorErrorCss,warning:this.options.style.anchorWarningCss}[s];n&&t.forEach(o=>{const r=this.steps[o];e?r.classList.add(n):r.classList.remove(n)})}goToStep(t,s){s=s!==!1,!(s!==!0&&!this._isShowable(this.steps[t]))&&(s===!0&&t>0&&this.options.anchor.enableDoneState&&this.options.anchor.markPreviousStepsAsDone&&this.steps.slice(0,t).forEach(e=>e.classList.add(this.options.style.anchorDoneCss)),this._showStep(t))}next(){this._navigate("next")}prev(){this._navigate("prev")}reset(){this.steps.forEach(t=>t.classList.remove(this.options.style.anchorDoneCss,this.options.style.anchorActiveCss,this.options.style.anchorErrorCss,this.options.style.anchorWarningCss)),this._setURLHash("#"),this._init(),this._load()}setState(t,s){this._changeState(t,s,!0)}unsetState(t,s){this._changeState(t,s,!1)}setOptions(t){this.options={...this.options,...t},this._init()}getOptions(){return this.options}getStepInfo(){return{currentStep:this.current_index!==null?this.current_index:0,totalSteps:this.steps?this.steps.length:0}}loader(t){this.element.classList.toggle(this.options.style.loaderCss,t==="show")}fixHeight(){this._fixHeight(this.current_index)}};g(a,"transitions",{fade:(t,s,e,i,n)=>{(s?new Promise(r=>{s.style.transition=`opacity ${i.options.transition.speed/1e3}s ease`,s.style.opacity="0",s.addEventListener("transitionend",()=>{s.style.display="none",s.style.transition="",r()},{once:!0})}):Promise.resolve()).then(()=>{t.style.transition=`opacity ${i.options.transition.speed/1e3}s ease`,t.style.opacity="0",t.style.display="",setTimeout(()=>{t.style.opacity="1",t.addEventListener("transitionend",()=>{t.style.transition="",n()},{once:!0})},50)})},slideHorizontal:(t,s,e,i,n)=>{const o=i.container.offsetWidth,r=e==="backward"?1:-1;i.current_index===-1&&(i.container.style.height=`${t.offsetHeight}px`),s&&(s.style.position="absolute",s.style.left="0",s.style.transition=`left ${i.options.transition.speed/1e3}s`,s.style.left=`${o*r}px`,s.addEventListener("transitionend",()=>{s.style.display="none",s.style.position="",s.style.left="",s.style.transition=""},{once:!0}));const u=o*(r===1?-1:1);t.style.position="absolute",t.style.left=`${u}px`,t.style.display="",t.style.transition=`left ${i.options.transition.speed/1e3}s`,setTimeout(()=>{t.style.left="0",t.addEventListener("transitionend",()=>{t.style.position="",t.style.left="",t.style.transition="",n()},{once:!0})},50)},css:(t,s,e,i,n)=>{const o=(l,p,f)=>{if(!p){f();return}const d=()=>{l.classList.remove(p),l.removeEventListener("animationend",d),l.removeEventListener("animationcancel",y),f()},y=()=>{l.classList.remove(p),l.removeEventListener("animationend",d),l.removeEventListener("animationcancel",y),f("cancel")};l.classList.add(p),l.addEventListener("animationend",d),l.addEventListener("animationcancel",y)},r=`${i.options.transition.prefixCss} ${e==="backward"?i.options.transition.bckShowCss:i.options.transition.fwdShowCss}`,u=`${i.options.transition.prefixCss} ${e==="backward"?i.options.transition.bckHideCss:i.options.transition.fwdHideCss}`;s?o(s,u,()=>{s.style.display="none",t.style.display="",o(t,r,()=>{n()})}):(t.style.display="",o(t,r,()=>{n()}))}});let h=a;typeof module=="object"&&typeof module.exports=="object"?module.exports=h:typeof define=="function"&&define.amd?define(function(){return h}):typeof window<"u"&&(window.SmartWizard=h)})();
